# Spring server configuration
# By default, tomcat will listen on port 8080 and will be restarted once the config has been read from the config service.
# Unfortunately, when multiple spring cloud services are starting at the same time in the same container (e.g. when testing),
# they will all try to use port 8080 until they have been restarted following a config refresh. To overcome this,
# port 0 (i.e. random unused port) will be used until the config has been refreshed and the correct port used.
server:
  port: 0

# Spring cloud config client configuration
spring:
  application:
    # Required by the discovery service as the key to enable other services to lookup and access this service
    name: thule-edge-server
  cloud:
    config:
      # Must set this to true when attempting retry otherwise it will not retry connecting to the config server if not available at startup
      failFast: true
      # When to retry accessing the config service if it not available at startup
      retry:
        maxAttempts: 9999
        initialInterval: 3000
      # Location of the config service
      uri: http://${thule.config.service.host:localhost}:${thule.config.service.port:8888}/
