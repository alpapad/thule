// Integration test configuration
configurations {
    itestCompile.extendsFrom testCompile
    itestRuntime.extendsFrom testRuntime
}
sourceSets {
    itest {
        compileClasspath += main.output + test.output
        runtimeClasspath += main.output + test.output

        java.srcDir file("src/itest/java")
        resources.srcDir file("src/itest/resources")
    }
}
task itest(type: Test) {
    testClassesDirs = sourceSets.itest.output.classesDirs
    classpath = sourceSets.itest.runtimeClasspath

    // Should run after the unit tests and jacoco
    shouldRunAfter test, jacocoTestReport
}