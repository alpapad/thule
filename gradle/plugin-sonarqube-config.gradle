if (project.tasks.findByName("sonarqube")) {
    ext {
        // Set default values for properties that can be overridden
        sonarHost = project.hasProperty("sonarHost") ? project.getProperty("sonarHost") : "ci.gohenry.co.uk"
        sonarPort = project.hasProperty("sonarPort") ? project.getProperty("sonarPort") : 9000
        sonarProjectNameSuffix = project.hasProperty("sonarProjectNameSuffix") ? project.getProperty("sonarProjectNameSuffix") : System.properties["user.name"]
    }

    sonarqube {
        properties {
            property "sonar.host.url", "http://" + sonarHost + ":" + sonarPort
            property "sonar.scm.disabled", "true"
            property "sonar.projectKey", project.group + ":" + project.name + ":" + sonarProjectNameSuffix
            property "sonar.projectName", project.description + " [" + sonarProjectNameSuffix + "]"
        }
    }
}